# AgentGate v0.5 — Review Fixes & Production Hardening
# Sprint Status Tracker
# Updated: 2026-02-06 16:15 GMT+2

sprint:
  name: "v0.5 Review Fixes & Production Hardening"
  created: "2026-02-06"
  status: "in-progress"
  total_stories: 26
  completed: 5
  in_progress: 0

epics:
  - id: epic-1
    name: "Critical Bug Fixes"
    status: done
    stories:
      - id: "1.1"
        title: "Fix MCP Decide Handler — Add decidedBy Field"
        status: done
        commit: "0367fae"
      - id: "1.2"
        title: "Fix Discord Bot — Add Auth Header to API Calls"
        status: done
        commit: "0143be3"
      - id: "1.3"
        title: "Fix PostgreSQL Mode — Async DB Initialization"
        status: done
        # 14 files refactored from sync db to getDb()
      - id: "1.4"
        title: "Add Auto-Migrations on Server Startup"
        status: done
        commit: "a1b8f4b"

  - id: epic-2
    name: "Security Hardening"
    status: in-progress
    stories:
      - id: "2.1"
        title: "Atomic Update for Decision Endpoint — Fix Race Condition"
        status: done
        commit: "6d4a199"
      - id: "2.2"
        title: "Cross-Invalidate Decision Tokens After Use"
        status: not-started
      - id: "2.3"
        title: "ReDoS Protection for $regex Policy Matcher"
        status: not-started
      - id: "2.4"
        title: "HTML Escaping in Email Templates"
        status: not-started
      - id: "2.5"
        title: "SSRF Protection for Webhook Notification Adapter"
        status: not-started
      - id: "2.6"
        title: "Require Admin API Key in Production"
        status: not-started
      - id: "2.7"
        title: "Add Request Body Size Limits"
        status: not-started

  - id: epic-3
    name: "Production Infrastructure"
    status: not-started
    stories:
      - id: "3.1"
        title: "Add Graceful Shutdown (SIGTERM/SIGINT Handler)"
        status: not-started
      - id: "3.2"
        title: "Persistent Webhook Retry Queue (Replace setTimeout)"
        status: not-started
      - id: "3.3"
        title: "Add Database Indexes"
        status: not-started
      - id: "3.4"
        title: "Wire Structured Logging (Replace console.*)"
        status: not-started
      - id: "3.5"
        title: "Deep Health Check (Verify DB + Redis)"
        status: not-started
      - id: "3.6"
        title: "Create .dockerignore File"
        status: not-started

  - id: epic-4
    name: "Code Quality & Performance"
    status: not-started
    stories:
      - id: "4.1"
        title: "Batch lastUsedAt Writes for API Keys"
        status: not-started
      - id: "4.2"
        title: "Reuse Email Transporter"
        status: not-started
      - id: "4.3"
        title: "Remove SDK confirm() Method (Dead Code)"
        status: not-started
      - id: "4.4"
        title: "Consolidate HTTP Client Implementations"
        status: not-started

  - id: epic-5
    name: "CI/CD & Deployment"
    status: not-started
    stories:
      - id: "5.1"
        title: "Add Test Step to CI Pipeline"
        status: not-started
      - id: "5.2"
        title: "Add PR Check Workflow"
        status: not-started
      - id: "5.3"
        title: "Docker Image Publishing Workflow"
        status: not-started
      - id: "5.4"
        title: "File-Based Secrets Support (_FILE Suffix)"
        status: not-started
      - id: "5.5"
        title: "Air-Gap Docker Image Bundle Documentation"
        status: not-started
